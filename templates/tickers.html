{% load static %}
<html>

<head>
    <title>Tickers</title>
    <link rel="icon" href="data:,">
    <script src="https://kit.fontawesome.com/34f40f3751.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href='{% static "css/style_noutati.css" %}'>
    <style>
        * {
            box-sizing: border-box;
        }

        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            background-color: rgb(228, 101, 17);
            overflow: hidden;
        }

        li {
            float: left;
            border-right: 1px solid #bbb;
        }

        li:last-child {
            border-right: none;
        }

        li a {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            background-color: rgb(228, 101, 17);
            text-decoration: none;
        }

        a {
            text-decoration: none;
        }

        table {
            border-collapse: collapse;
            font-family: Tahoma, Geneva, sans-serif;
        }

        table td {
            padding: 15px;
        }

        table thead td {
            background-color: #54585d;
            color: #ffffff;
            font-weight: bold;
            font-size: 13px;
            border: 1px solid #54585d;
        }

        table tbody td {
            color: #636363;
            border: 1px solid #dddfe1;
        }

        table tbody tr {
            background-color: #f9fafb;
        }

        table tbody tr:nth-child(odd) {
            background-color: #ffffff;
        }

    </style>
</head>

<body>
<h1 class="header">NFinance</h1>
<div class="menup">
    <ul>
        <li><a href="{% url 'index' %}">News</a></li>
        <li><a href="">Tickers</a></li>
    </ul>
</div>


<div class="row">

    <form method="POST" action="" style="margin: 20px">
        {% csrf_token %}
        {{ form.as_p }}
        <div class="wrap">
            <div class="search">
                <input id="tick" type="text" class="searchTerm" placeholder="Search a ticker.." name="ticker" required>
                <button type="submit" class="searchButton">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </div>
    </form>


    <br>
    {% for ticker in ticker_list %}
    {% if ticker.title %}
    <span style="display: inline-block">
    <table style="margin-left: 20px">
        <thead>
        <tr>
            <th>{{ticker.title}}</th>
        </tr>
        </thead>

        <tbody>
        <tr>
            <td>Current price: {{ticker.current_price}}</td>
            <td>Avg. Volume: {{ticker.avg_volume}}</td>
        </tr>
        <tr>
            <td>Previous Close: {{ticker.previous_close}}</td>
            <td>Market Cap: {{ticker.market_cap}}</td>
        </tr>
        <tr>
            <td>Open Price: {{ticker.open}}</td>
            <td>Earnings Date: {{ticker.earnings_date}}</td>
        </tr>
        <tr>
            <td>Bid: {{ticker.bid}}</td>
            <td>1y Target Est: {{ticker.year_target_est}}</td>
        </tr>
        <tr>
            <td>Ask: {{ticker.ask}}</td>
            <td>52 Week Range: {{ticker.year_range}}</td>
        </tr>
        <tr>
            <td>Volume: {{ticker.volume}}</td>
            <td>Day's Range: {{ticker.day_range}}</td>
        </tr>
        </tbody>
    </table>
    </span>

    <span style="margin-left: 20px">
    <!-- TradingView Widget BEGIN -->

        <div class="tradingview-widget-container" style="display: inline-block">
          <div id="tradingview_411c1"></div>
          <div class="tradingview-widget-copyright"><a href="{{graph_url}}" rel="noopener"
                                                       target="_blank"><span class="blue-text">{{ticker}}</span></a> by TradingView</div>
          <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
          <script type="text/javascript">
          new TradingView.MediumWidget(
              {
                  "symbols":
                      [
                          "{{ticker.tick}}|1D"
                      ]
                  ,
                  "chartOnly": false,
                  "width": 1000,
                  "height": 400,
                  "locale": "en",
                  "colorTheme": "light",
                  "gridLineColor": "rgba(109, 158, 235, 1)",
                  "trendLineColor": "#2196f3",
                  "fontColor": "rgba(0, 0, 0, 1)",
                  "underLineColor": "rgba(109, 158, 235, 1)",
                  "isTransparent": true,
                  "autosize": false,
                  "container_id": "tradingview_411c1"
              }
          );
          </script>
        </div>
    </span>

    <!-- TradingView Widget END -->
    {% endif %}
    {% endfor %}

</div>
</body>

<div class="footer">
    <a href="https://www.facebook.com/sorinbland" target="blank"><i class="fab fa-facebook-square"
                                                                    style="font-size: 36px;color: rgb(228, 101, 17);"></i></a>
    <a href="https://www.instagram.com/hapcius/" target="blank"><i class="fab fa-instagram-square"
                                                                   style="font-size: 36px;color: rgb(228, 101, 17);"></i></a>
    <a href="https://www.reddit.com/user/Ciucku" target="blank"><i class="fab fa-reddit-square"
                                                                   style="font-size: 36px;color: rgb(228, 101, 17);"></i></a>

</div>
</html>