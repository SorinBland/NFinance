{% load static %}
<html lang="eng">

<head>
    <title>Tickers</title>
    <link rel="icon" href="data:,">
    <script src="https://kit.fontawesome.com/34f40f3751.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href='{% static "css/style_noutati.css" %}'>

    <style>
        * {
            box-sizing: border-box;
        }

        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            background-color: #454545;
            overflow: hidden;
            height: 50px;
        }

        li {
            float: left;

        }

        li:last-child {
            border-right: none;
        }

        li a {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            background-color: #454545;
            text-decoration: none;
        }

        li a:hover:not(.active) {
            background-color: #111;
        }

        .active {
            background-color: #111;
        }

        a {
            text-decoration: none;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
            width: 34.2%;
            border: 1px solid #ddd;
            margin-bottom: 20px;

        }

        th, td {
            text-align: left;
            padding: 10px;
            background-color: white;
            border: 1px solid #ddd;
        }

        .company_summary {
            font-family: Arial, serif;
            font-size: 0.875em;
            margin-left: 287px;
            width: 30%;
            margin-bottom: 20px;
            margin-top: 20px;
        }

        .button {
            display: inline-block;
            border-radius: 4px;
            background-color: rgba(0, 0, 0, .25));
            border: none;
            color: #FFFFFF;
            text-align: center;
            font-size: 15px;
            width: 150px;
            transition: all 0.5s;
            cursor: pointer;
            margin-left: 287px;
        }

        .button span {
            cursor: pointer;
            display: inline-block;
            position: relative;
            transition: 0.5s;
        }

        .button span:after {
            content: '\00bb';
            position: absolute;
            opacity: 0;
            top: 0;
            right: -20px;
            transition: 0.5s;
        }

        .button:hover span {
            padding-right: 25px;
        }

        .button:hover span:after {
            opacity: 1;
            right: 0;
        }
    </style>
</head>

<body>
<div class="menup">
    <ul>
        <li><img src={% static "img/logo2.png" %} alt="logo" style="padding: 10px 16px; display: block;"></li>
        <li><a href="/">News</a></li>
        <li><a href="{% url 'crypto' %}">Crypto</a></li>
        {% if user.is_authenticated %}
            <li><a class="active" href="">Tickers</a></li>
            <li style="float: right"><a href="{% url 'logout' %}">Logout</a></li>
        {% else %}

            <li style="float: right"><a href="{% url 'register' %}"> Sign Up</a></li>
            <li style="float: right"><a href="{% url 'login' %}"> Login</a></li>

        {% endif %}
        <li style="width: 800px">
            <form method="POST" action="">
                {% csrf_token %}
                {{ form.as_p }}
                <div class="wraps">
                    <div class="search">
                        <input id="tick" type="text" class="searchTerm" placeholder="Search a ticker.." name="ticker"
                               required>
                        <button type="submit" class="searchButton">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </form>
        </li>
    </ul>
</div>
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
    <div class="tradingview-widget-container__widget"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-tickers.js" async>
        {
            "symbols"
        :
            [
                {
                    "proName": "FOREXCOM:SPXUSD",
                    "title": "S&P 500"
                },
                {
                    "proName": "FOREXCOM:NSXUSD",
                    "title": "Nasdaq 100"
                },
                {
                    "proName": "FX_IDC:EURUSD",
                    "title": "EUR/USD"
                },
                {
                    "proName": "BITSTAMP:BTCUSD",
                    "title": "BTC/USD"
                },
                {
                    "proName": "BITSTAMP:ETHUSD",
                    "title": "ETH/USD"
                }
            ],
                "colorTheme"
        :
            "light",
                "isTransparent"
        :
            true,
                "showSymbolLogo"
        :
            false,
                "locale"
        :
            "en"
        }
    </script>
</div>
<!-- TradingView Widget END -->
<hr style="height:2px; border-width:0; color:gray; background-color:gray;">

<div class="row">
    {% for ticker in ticker_list %}
        {% if ticker.title %}
            <div class="titlu_ticker"> {{ ticker.title }}</div>
            <hr style="width: 1310px; height:2px; border-width:0; color:gray; background-color:gray; margin-left: 287px;">
            {% if ticker.company_profile %}
                <div class="company_summary"> {{ ticker.company_profile }} </div>
            {% else %}
                <div class="company_summary"> {{ ticker.title }} </div>
            {% endif %}

            <a href="https://finance.yahoo.com/quote/{{ ticker.tick }}/profile?p={{ ticker.tick }}">
                <button class="button">Read more..</button>
            </a>

            <!-- TradingView Widget BEGIN -->
            <div class="tradingview-widget-container" style="margin-right: 20px; margin-bottom: 10px">
                <div id="tradingview_8d77b"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                <script type="text/javascript">
                    new TradingView.widget(
                        {
                            "width": 1310,
                            "height": 400,
                            "symbol": "{{ticker.tick}}",
                            "interval": "D",
                            "timezone": "Etc/UTC",
                            "theme": "light",
                            "style": "1",
                            "locale": "en",
                            "toolbar_bg": "#f1f3f6",
                            "enable_publishing": false,
                            "allow_symbol_change": false,
                            "container_id": "tradingview_8d77b"
                        }
                    );
                </script>
            </div>
            <!-- TradingView Widget END -->

            <table style="float: left; margin-left: 287px;">
                <tr>
                    <td>Current price:</td>
                    {% if not ticker.current_price %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.current_price }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>Previous Close:</td>
                    {% if not ticker.previous_close %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.previous_close }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>Open Price:</td>
                    {% if not ticker.open %}
                        <td>N/A</td>
                    {% else %}
                        <td> {{ ticker.open }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>Bid:</td>
                    {% if not ticker.bid %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.bid }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>Ask:</td>
                    {% if not ticker.ask %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.ask }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>Volume:</td>
                    {% if not ticker.volume %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.volume }}</td>
                    {% endif %}
                </tr>
            </table>


            <table style="float: left; margin-left: 10px">
                <tr>
                    <td>Avg. Volume:</td>
                    {% if not ticker.avg_volume %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.avg_volume }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>Market Cap:</td>
                    {% if not ticker.market_cap %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.market_cap }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>Earnings Date:</td>
                    {% if not ticker.earnings_date %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.earnings_date }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>1y Target Est:</td>
                    {% if not ticker.year_target_este %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.year_target_est }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>52 Week Range:</td>
                    {% if not ticker.year_range %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.year_range }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>Day's Range:</td>
                    {% if not ticker.day_range %}
                        <td>N/A</td>
                    {% else %}
                        <td>{{ ticker.day_range }}</td>
                    {% endif %}
                </tr>
            </table>


        {% endif %}
    {% endfor %}

</div>

</body>
<div class="footer">
    <a href="https://www.facebook.com/sorinbland" target="blank"><i class="fab fa-facebook-square"
                                                                    style="font-size: 36px;color: rgb(255, 255, 255);"></i></a>
    <a href="https://www.instagram.com/hapcius/" target="blank"><i class="fab fa-instagram-square"
                                                                   style="font-size: 36px;color: rgb(255, 255, 255);"></i></a>
    <a href="https://www.reddit.com/user/Ciucku" target="blank"><i class="fab fa-reddit-square"
                                                                   style="font-size: 36px;color: rgb(255, 255, 255);"></i></a>
</div>
</html>